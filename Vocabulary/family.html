<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Family Fun</title>
    <style>
      /* General Styling */
      body {
        background-color: #1a1a2e;
        color: #ffffff;
        font-family: "Verdana", "Nunito", "Arial Rounded MT Bold", sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
        overflow-x: hidden;
        padding: 20px;
      }

      /* Main Container & Layout */
      .container {
        position: relative;
        text-align: center;
        width: 100%;
        max-width: 1200px;
      }

      /* Close Button */
      #close-btn {
        position: absolute;
        top: 0;
        right: 0;
        background: transparent;
        border: 2px solid white;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.3s, transform 0.3s;
      }

      #close-btn:hover {
        background-color: rgba(255, 255, 255, 0.2);
        transform: scale(1.1);
      }

      /* Image Container (now draggable items) */
      .image-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
        margin-top: 80px;
        margin-bottom: 40px;
      }

      .draggable-image {
        width: 180px;
        height: 180px;
        border-radius: 15px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        object-fit: cover;
        cursor: grab;
        transition: all 0.3s ease;
      }

      .draggable-image:active {
        cursor: grabbing;
        transform: scale(1.05);
      }

      /* Drop Box Layout (now holds words) */
      .word-box-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .box {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .drop-box {
        width: 180px;
        height: 180px;
        background-color: #0f3460;
        border: 1px dashed #ffffff;
        border-radius: 15px;
        margin-top: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8em;
        transition: all 0.3s;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
      }

      .drop-box.hovered {
        background-color: #164a8a;
        border-color: #f07489;
        box-shadow: inset 0 0 15px rgba(240, 116, 137, 0.5),
          0 0 10px rgba(0, 0, 0, 0.3);
      }

      .drop-box.dropped {
        background-color: #2e7d32;
        border-style: solid;
        border-color: #5ddc5f;
        color: #ffffff;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2),
          0 0 15px rgba(93, 220, 95, 0.5);
      }

      .word-label {
        font-size: 1.2em;
        margin-top: 10px;
        font-weight: normal;
        letter-spacing: -0.5px;
      }

      /* Reward Stars: Jumping and Wandering */
      .star {
        position: fixed;
        width: 20px;
        height: 20px;
        background: gold;
        box-shadow: 0 0 10px 5px gold;
        clip-path: polygon(
          50% 0%,
          61% 35%,
          98% 35%,
          68% 57%,
          79% 91%,
          50% 70%,
          21% 91%,
          32% 57%,
          2% 35%,
          39% 35%
        );
        animation: jump-and-wander 1.5s forwards;
        pointer-events: none;
        z-index: 9999;
      }

      @keyframes jump-and-wander {
        0% {
          transform: scale(0) translate(0, 0);
          opacity: 1;
        }
        100% {
          transform: scale(1.5) translate(var(--x-wander), var(--y-jump));
          opacity: 0;
        }
      }

      /* Media Queries for Tablet and Mobile Responsiveness */
      @media (max-width: 768px) {
        .image-container {
          gap: 15px;
          margin-top: 70px;
        }
        .draggable-image {
          width: 140px;
          height: 140px;
        }
        .word-box-container {
          flex-direction: column;
          gap: 30px;
        }
        .drop-box {
          width: 140px;
          height: 140px;
        }
        .word-label {
          font-size: 1em;
        }
        #close-btn {
          top: 10px;
          right: 10px;
          width: 35px;
          height: 35px;
          font-size: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <button id="close-btn" onclick="window.close()">‚úñ</button>

      <header class="image-container">
        <img
          src="media/family.png"
          alt="An image of a family"
          class="draggable-image"
          draggable="true"
          id="family"
          data-correct="family"
        />
        <img
          src="media/mother.png"
          alt="An image of a mother"
          class="draggable-image"
          draggable="true"
          id="mother"
          data-correct="mother"
        />
        <img
          src="media/father.png"
          alt="An image of a father"
          class="draggable-image"
          draggable="true"
          id="father"
          data-correct="father"
        />
        <img
          src="media/sister.png"
          alt="An image of a sister"
          class="draggable-image"
          draggable="true"
          id="sister"
          data-correct="sister"
        />
        <img
          src="media/brother.png"
          alt="An image of a brother"
          class="draggable-image"
          draggable="true"
          id="brother"
          data-correct="brother"
        />
      </header>

      <main class="word-box-container">
        <section class="box">
          <div class="drop-box" data-accept="brother"></div>
          <p class="word-label">Brother</p>
        </section>
        <section class="box">
          <div class="drop-box" data-accept="family"></div>
          <p class="word-label">Family</p>
        </section>
        <section class="box">
          <div class="drop-box" data-accept="sister"></div>
          <p class="word-label">Sister</p>
        </section>
        <section class="box">
          <div class="drop-box" data-accept="father"></div>
          <p class="word-label">Father</p>
        </section>
        <section class="box">
          <div class="drop-box" data-accept="mother"></div>
          <p class="word-label">Mother</p>
        </section>
      </main>
    </div>

    <audio id="audio-father" src="media/father.mp3"></audio>
    <audio id="audio-mother" src="media/mother.mp3"></audio>
    <audio id="audio-brother" src="media/brother.mp3"></audio>
    <audio id="audio-sister" src="media/sister.mp3"></audio>
    <audio id="audio-family" src="media/family.mp3"></audio>

    <audio id="audio-no" src="no.mp3"></audio>
    <audio id="audio-success" src="success.mp3"></audio>
    <audio id="audio-celebration-music" src="media/end1.mp3"></audio>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const draggableImages = document.querySelectorAll(".draggable-image");
        const dropBoxes = document.querySelectorAll(".drop-box");
        let correctCount = 0;
        const TOTAL_ITEMS = 5;

        // --- Drag and Drop Logic ---

        draggableImages.forEach((image) => {
          image.addEventListener("dragstart", (e) => {
            e.dataTransfer.setData("text/plain", e.target.id);
          });
        });

        dropBoxes.forEach((box) => {
          box.addEventListener("dragover", (e) => {
            e.preventDefault();
            if (!box.classList.contains("dropped")) {
              box.classList.add("hovered");
            }
          });

          box.addEventListener("dragleave", () => {
            box.classList.remove("hovered");
          });

          box.addEventListener("drop", (e) => {
            e.preventDefault();
            box.classList.remove("hovered");

            if (box.classList.contains("dropped")) return;

            const droppedImageId = e.dataTransfer.getData("text/plain");
            const droppedImageElem = document.getElementById(droppedImageId);

            if (box.dataset.accept === droppedImageId) {
              // --- Correct Drop --- ‚úÖ
              box.innerHTML = "";
              box.appendChild(droppedImageElem);
              droppedImageElem.style.width = "100%";
              droppedImageElem.style.height = "100%";
              droppedImageElem.style.borderRadius = "10px";
              droppedImageElem.style.boxShadow = "none";
              droppedImageElem.style.cursor = "default";
              droppedImageElem.draggable = false;
              box.classList.add("dropped");

              document.getElementById(`audio-${droppedImageId}`).play();

              correctCount++;
              if (correctCount === TOTAL_ITEMS) {
                celebrate();
              }
            } else {
              // --- Incorrect Drop --- ‚ùå
              document.getElementById("audio-no").play();
            }
          });
        });

        // --- Celebration Function --- üéâ
        function celebrate() {
          document.getElementById("audio-success").play();
          document.getElementById("audio-celebration-music").play();

          for (let i = 0; i < 100; i++) {
            createStar();
          }
        }

        function createStar() {
          const star = document.createElement("div");
          star.className = "star";

          const xWander = (Math.random() - 0.5) * 200;
          const yJump = Math.random() * -200 - 50;

          star.style.setProperty("--x-wander", `${xWander}px`);
          star.style.setProperty("--y-jump", `${yJump}px`);

          star.style.top = `${Math.random() * 100}%`;
          star.style.left = `${Math.random() * 100}%`;
          star.style.animationDelay = `${Math.random() * 1}s`;
          document.body.appendChild(star);

          star.addEventListener("animationend", () => {
            star.remove();
          });
        }
      });
    </script>
  </body>
</html>
